<!-- Card -->
<div class="bg-white shadow-lg rounded-lg p-5 hover:shadow-xl transition-shadow border border-gray-100 flex flex-col">

    <!-- Header -->
    <div class="flex items-start justify-between gap-4">

        <!-- Left: Title + Description -->
        <div class="min-w-0">
            <h3 class="font-semibold text-lg text-gray-900 leading-snug truncate">
                {{ task.title | uppercase }}
            </h3>

            <p class="mt-1 text-sm text-gray-600 break-words">
                {{ task.description }}
            </p>
        </div>

        <!-- Right: Status -->
        <span class="text-xs font-medium px-2.5 py-1 rounded-full border shrink-0" [ngClass]="{
        'bg-blue-50 text-blue-700 border-blue-200': task.status === 'TO_DO',
        'bg-yellow-50 text-yellow-700 border-yellow-200': task.status === 'IN_PROGRESS',
        'bg-green-50 text-green-700 border-green-200': task.status === 'COMPLETED'
      }">
            {{ task.status | uppercase }}
        </span>

    </div>

    <!-- Actions -->
    <div class="mt-4 flex items-center gap-2">

        <!-- Edit -->
        <button
            class="inline-flex items-center gap-2 text-sm bg-blue-100 text-blue-700 hover:bg-blue-200 px-3 py-1.5 rounded-md cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" class="size-4" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                    d="M16.862 3.487a1.5 1.5 0 0 1 2.122 2.122L7.5 17.193 3 18.375l1.182-4.5L16.862 3.487z" />
            </svg>
            Edit
        </button>

        <!-- Change Status -->
        <div class="relative">

            <button (click)="toggleDropdown()"
                class="inline-flex items-center gap-2 text-sm bg-amber-100 text-amber-700 hover:bg-amber-200 px-3 py-1.5 rounded-md cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" class="size-4" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M7 7l5-5 5 5M7 17l5 5 5-5" />
                </svg>
                Change Status
            </button>

            <!-- Dropdown (Optional) -->
            @if (showDropdown) {
            <div (click)="$event.stopPropagation()"
                class="absolute z-10 mt-2 w-40 bg-white border border-gray-200 rounded-md shadow-lg p-1">

                @for (status of statuses; track status) {
                <button (click)="changeStatus(status)"
                    class="w-full text-left px-3 py-2 rounded text-sm transition-colors"
                    [ngClass]="getStatusClasses(status)">
                    {{ status }}
                </button>
                }

            </div>
            }
        </div>

        <!-- Delete -->
        <button (click)="onDelete()"
            class="inline-flex items-center gap-2 text-sm bg-red-100 text-red-700 hover:bg-red-200 px-3 py-1.5 rounded-md cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" class="size-4" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M8 2a2 2 0 00-2 2H4.5a.5.5 0 000 1H5v11a2 2 0 002 2h6a2 2 0 002-2V5h.5a.5.5 0 000-1H14a2 2 0 00-2-2H8zm1 4a.5.5 0 011 0v9a.5.5 0 01-1 0V6zm4 0a.5.5 0 011 0v9a.5.5 0 01-1 0V6zM8 3a1 1 0 00-1 1h6a1 1 0 00-1-1H8z" />
            </svg>
            Delete
        </button>

    </div>

    <!-- Dates -->
    <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm">

        <div class="flex items-center gap-2">
            <span class="text-gray-500 shrink-0">Due:</span>
            <span class="font-medium text-gray-800 truncate">
                {{ task.dueDate }}
            </span>
        </div>

        <div class="flex items-center gap-2 min-w-0">
            <span class="text-gray-500 shrink-0">LastUpdate:</span>
            <span class="font-medium text-gray-800">
                {{ task.updatedAt }}
            </span>
        </div>

    </div>

</div>
<!-- /Card -->